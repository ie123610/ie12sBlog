# 2.1 目标与困难

通过前面的基础知识讲解 我们对网络传输的过程和P2P模式有了一定的  
现在要明确我们接下来操作的目标即 **开放端口**  
开放端口的原因和好处已经在 上一章中讲解过了  


**问：** 常见的困难有哪些呢？  

**答：** 问题主要集中在  

* **运营商**
* **光猫**
* **路由器**

讨论针对家庭网络 还需要分 IPv4 和 IPv6 来讨论  


---

### IPv4方面

#### 运营商

**指运营商级别NAT**  
运营商级别NAT用户无法直接调整  
虽然可以通过索要公网的方式解决但是难度较高  

#### 光猫

**指光猫设置**  
目前大部分的光猫集成了路由器功能且  
在事实上承担了路由器功能其性能参差不齐  容易影响网络稳定性  

光猫背面印刷的默认管理账户权限低可修改的内容很少  
需要获取超级管理员 以获得完整控制权  

各地区 各运营商 各型号的光猫 情况都有所不同 **超级管理员获取较为困难**  
端口转发 UPnP DMZ 以及修改工作模式（改桥接）  
关闭IPv6防火墙等功能基本都需要超级管理员权限  

#### 路由器

在IPv4方面 路由器的设置上一般不存在什么困难  
端口转发、DMZ、UPnP 等功能设置起来较为方便  

---

### IPv6方面

#### 运营商

在IPv6中一般是没有运营商级别NAT的  
目前三大运营商 几乎都支持IPv6  

广电 也宣布部署IPv6 不过目前进展似乎较慢  
其他二级运营商可能在短时间内还不会支持  

还有一种更常见的情况是运营商支持IPv6**但没有启用IPv6**  
即在光猫中只启用IPv4而没有启用IPv6  

#### 光猫

光猫设置和IPv4的情况差不多  
也依然存着 **设置困难和性能差的问题**  
包括 没有启用IPv6 和 光猫IPv6防火墙

如果是光猫拨号模式则需要关闭光猫中的IPv6防火墙  
因为其默认是阻止所有主动入站流量的  
桥接模式下光猫内的IPv6防火墙不起作用 **无需调整**  

#### 路由器

**指路由器对IPv6的支持问题**  
部分旧的路由器完全不支持IPv6  

而一些较新的路由器对IPv6的支持不完善  
支持IPv6上网功能但无法设置IPv6防火墙  

端口转发、UPnP DMZ 等功能是针对NAT 一般只对IPv4有效  
无法通过端口转发来实现开放IPv6端口  

还有些路由器是支持关闭IPv6防火墙的  
**不过是直接关闭整个IPv6防火墙** 这可能会造成一些安全问题  
最好在终端设备上设置一下防火墙 其已在特别篇中讲解过了  

[「特别篇」在关闭光猫、路由器IPv6防火墙后可能遇到的安全问题](./BC阻塞_特别篇.md)  


