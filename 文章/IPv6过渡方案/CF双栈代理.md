# 使用Cloudflare代理为纯IPv6站点添加IPv4访问


## 关于本教程

随着IPv6的普及 使用家庭宽带进行建站变得更加容易  
免去了获取IPv4公网或者使用STUN进行穿透的麻烦   
相当于纯IPv6站点   

不过需要注意光猫和路由器上的防火墙  
IPv6教程开放端口教程：链接  

而在客户端侧 也就是访问方面  
移动设备主要是手机 其移动数据（也就所谓的手机流量）  
几乎都已经提供IPv6了  

家庭宽带方面 情况略差 但IPv6的渗透率也在不断的增加  
尤其是新办理的宽带  

而公共网络方面的情况就比较复杂了  
一些学校/公司/大型商业场所 的公共网络可能已经在提供IPv6了  
不过更多的地方可能还没有   

在IPv6推广上这些公共网络可能是 最迟一批提供IPv6支持的  
所以在在无IPv6的环境下访问纯IPv6站点就成为了一个亟待解决的问题  

---

## 可用的解决方法

要解决在无IPv6环境下访问纯IPv6站点 主要有两条路线  

* **为服务端添加 IPv4 访问性**  
* **为客户端添加 IPv6 访问性**  

### 服务端侧

* **使用STUN 穿透获得IPv4访问性**  

  通过STUN 穿透运营商NAT获得可被外界访问的端口  
  此方案在之前的教程中已经有所接受：链接  
     
  优点：若能成功穿透则延迟则速度与相当于IPv4公网  
  缺点：设置相对较为复杂且对NAT类型有要求 穿透后的端口是随机的需要额外设置  


* **使用FRP穿透 获得IPv4访问性**  

  通过有IPv4公网的FRP服务器进行中转  
  一般需要在服务端侧安装FRP客户端以与FRP服务器连接  

  优点：可以适用于任意网络环境 甚至包括对称型NAT以及无IPv6环境  
        配置较为简单 方案较为成熟可参考案例多
  
  缺点：速率和稳定性受FRP服务器节点影响 尤其是免费节点 延迟略有增加  
        要获得更好的体验可能需要付费 且需要实名认证 使用HTTP(S)  
        穿透需要备案  

* **CloudFlare双栈代理 获得IPv4访问性**  

  与FRP方案类似 使用CloudFlare节点进行中转也可以达到目的  
  （CloudFlare下文称CF）
 
  优点：完全免费 CF 的大部分节点都是免费的
        无明显速率限制 主要取决于服务端侧的上传能力


### 客户端侧

使隧道技术获得IPv6访问性




## 使用CloudFlare代理

使用CloudFlare代理可以解决这个问题 （CloudFlare下文称CF）  

CF 服务器（节点）同时拥有IPv4和IPv6地址 其起到桥梁作用   
以沟通纯IPv4的客户端 和纯IPv6的服务端  

客户端发起IPv4请求到达CF节点   
CF简单 收到请求后将其转换成IPv6请求发往服务端  

服务端使用IPv6应答请求 CF节点的请求   
节点



## 优点和不足


流程图


在之前的文章中介绍了 一系列的WEB服务的教程

STUN穿透教程 反向代理教程



手机流量也有IPv6 使用移动设备访问一般不成问题


但是公共场所网络 大部分还不支持IPv6

对于在家中 有NAS或者其他形式影音服务器
在外对其进行访问 就成了一个问题

手机流量虽然有IPv6 但是观影小消耗不少流量
要是能使用公共网络就好了

但是正如前面所说 大部分的公共网络 还不支持IPv6
所以需要进行转换

比较好的选择 双栈

使用 使用Cloudflare代理为纯IPv6站点添加IPv4访问
当然这不仅适用于 再外使用公共网络访问纯IPv6的家庭影音服务
也适用于其他 形式的 为纯IPv6站点添加访问




使用cloudflare的优点和缺点其实都很明显 
最明显的优点当然是免 免费

第二个

## 设置CF代理


## 设置CF IP 优选

### 关于IP 优选

### Windows 优选方法

### 安卓设备 优选方法

### 在线优选











