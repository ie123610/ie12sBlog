# SVCB/HTTPS记录与免费FRP穿透配合使用 WIP

2023.2.  

在之前的教程中 
实现了 使用 SVCB/HTTPS记录 指示非标准端口HTTPS端口

以实现 不输入 端口号 和隐藏端口号


STUN穿透 并不能总是成功 
中继方案就成为了

frp的使用stun与之类似

只不过通道 由STUN穿透隧道 变成了 frp
转发隧道

值得注意的是 若要使用国内节点进行穿透
则需要进行备案 有趣的是这仅限于HTTP(s)隧道

使用TCP隧道 则不需要 但由于HTTP是明文传输
未备案的域名会阻断

但HTTPS则不会 尽管理论上可以通过SNI进行阻断
但是目前没有采用这样这样的措施

所以使用免费frp节点加HTTPS就可以在没有备案的情况下
搭建WEB服务 

当然纯HTTPS有一个小缺点就是

但针对SVCB/HTTPS记录应用还有一个更大的问题需要解决
那就是IP解析问题  

与STUN通过穿透服务器获得本地对外IP不同

ftp连接的是专门的穿透节点 
在穿透成功后会显示对外的IP或者域名 

问题就出在如何将这样IP传递给自己使用的域名

在过去 解决方法很简单 使用 cname 记录
直接从提供的域名中继承A类解析 或者干脆用IP进行连接

但是在需要使用 SVCB/HTTPS 时就会遇到问题  
cname 具有极强的排他性 与之同名的其他记录
无论是 A类记录 MX记录或者其他什么类型的记录都会失效

因为 cname 是别名 本质上是让系统去查询其指向的域名
所有内容都从指向的域名中获取

这会导致SVCB/HTTPS失效

虽然SVCB/HTTPS 中有别名模式 





